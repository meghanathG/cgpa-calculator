<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<html>
<head>
    <title>Subjects Form</title>
    <script>
        function addSubject() {
            const subjectForm = document.getElementById('subjectForm');
            const newSubject = document.createElement('div');
            newSubject.className = 'form-group';
            const subjectCount = document.querySelectorAll('.form-group').length;
            newSubject.innerHTML = `
                <label>Grade:</label>
                <input type="text" name="subjects[${subjectCount}].grade" class="form-control"/>
                <label>Credit:</label>
                <input type="number" name="subjects[${subjectCount}].credit" class="form-control"/>
            `;
            subjectForm.insertBefore(newSubject, document.getElementById('addButton'));
        }
    </script>
</head>
<body>
    <h1>Subjects Form</h1>
    <form action="${pageContext.request.contextPath}/subjects" method="post" id="subjectForm">
        <c:forEach items="${subjectForm.subjects}" var="subject" varStatus="status">
            <div class="form-group">
                <label>Grade:</label>
                <input type="text" name="subjects[${status.index}].grade" value="${subject.grade}" class="form-control"/>
                <label>Credit:</label>
                <input type="number" name="subjects[${status.index}].credit" value="${subject.credit}" class="form-control"/>
            </div>
        </c:forEach>
        <button type="button" id="addButton" onclick="addSubject()">Add Subject</button>
        <button type="submit">Submit</button>
    </form>
</body>
</html>
